<!DOCTYPE html>

<html lang="en">

<head>
  
  <title>git分支管理和工作流规范 - Hexo</title>
  <meta charset="UTF-8">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png" />
  <meta name="description" content="git分支管理和工作流规范">
<meta property="og:type" content="article">
<meta property="og:title" content="git分支管理和工作流规范">
<meta property="og:url" content="https://zkydrx.github.io/2020/10/16/2020-04-24-git-branch-manage-work-flow/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="git分支管理和工作流规范">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/webp/160356/1586310708140-bc14d98f-5ca8-409f-b8ec-d4ffe174de68.webp#align=left&display=inline&height=795&originHeight=795&originWidth=600&size=0&status=done&style=none&width=600">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2020/webp/160356/1586310707983-39ab85ca-7a04-4943-a5ba-9258d127e29a.webp#align=left&display=inline&height=857&originHeight=857&originWidth=1280&size=0&status=done&style=none&width=1280">
<meta property="article:published_time" content="2020-10-16T02:17:53.000Z">
<meta property="article:modified_time" content="2020-10-16T02:35:32.564Z">
<meta property="article:author" content="zkygit">
<meta property="article:tag" content="Git">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2020/webp/160356/1586310708140-bc14d98f-5ca8-409f-b8ec-d4ffe174de68.webp#align=left&display=inline&height=795&originHeight=795&originWidth=600&size=0&status=done&style=none&width=600">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,gh/nexmoe/nexmoe.github.io@latest/lib/mdui_043tiny/css/mdui.css,gh/nexmoe/nexmoe.github.io@latest/lib/iconfont/iconfont.css?v=233" crossorigin>
  
  <link rel="stylesheet" href="/css/style.css?v=1602822831140">
<meta name="generator" content="Hexo 5.2.0"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/cover/5c3aec85a4343.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="zkygit" class="mdui-btn mdui-btn-icon"><img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="zkygit"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="zkygit">
            <img src="https://cdn.jsdelivr.net/gh/nexmoe/nexmoe.github.io@latest/images/avatar.png" alt="zkygit" alt="zkygit">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>Articles</span>2</div>
        <div><span>Tags</span>2</div>
        <div><span>Categories</span>0</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
        <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
            <label><input id="search_value" name="q" type="search" placeholder="Search"></label>
        </form>
    </div>
</div>
  
  <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://github.com/nexmoe/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
  
  

  
  
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/" style="font-size: 10px;">阅读方法</a>
    </div>
    
  </div>

  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">Archive</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>


<style>
.nexmoe-widget .archive-list-count{
	position : absolute;
	right: 15px;
	top:9px;
	color: #DDD;
}
</style>

  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2020 zkygit
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
  
      <div class="nexmoe-post-cover" style="padding-bottom: 62.5%;"> 
          <img data-src="https://ww2.sinaimg.cn/large/bfe05ea9ly1fwyb4evl4xj21hc0u0gum.jpg" data-sizes="auto" alt="git分支管理和工作流规范" class="lazyload">
          <h1>git分支管理和工作流规范</h1>
      </div>
  
  
  <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2020年10月16日</a>
    <a><i class="nexmoefont icon-areachart"></i>1.6k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 6 分钟</a>
</div>

  <div class="nexmoe-post-right">
    
  </div>

  <article>
    <h1 id="git分支管理和工作流规范"><a href="#git分支管理和工作流规范" class="headerlink" title="git分支管理和工作流规范"></a>git分支管理和工作流规范</h1><hr>
<a id="more"></a>
<p>本篇介绍具体的规范，包括分支的划分和命名规范，不同类型的分支应对不同的场景，然后会介绍下工作流工具git-flow，如何简化我们的操作。</p>
<h4 id="分支构成"><a href="#分支构成" class="headerlink" title="分支构成"></a>分支构成</h4><p>master和develop分支一直存在，且名称不会变化，一般不直接修改这2个分支，由其他分支合并而来。<br>feature、release、hotfix分别用于功能点开发、优化，特定版本测试，线上问题紧急处理，同一类型的分支会产生多个。<br>分支划分如下：</p>
<ul>
<li>master：与线上版本保持绝对一致；</li>
<li>develop：开发分支，由下文提到的release、feature、hotfix分支合并过后的代码；</li>
<li>feature：实际功能点开发分支，建议每个功能新建一个feature， 具有关联关系的功能公用一个feature分支；</li>
<li>release：每一次开发完成之后，从develop创建出来的分支，以此分支为基准，进行测试；</li>
<li>hotfix：该分支主要用于修复线上bug；</li>
</ul>
<p>命名规范约定如下：</p>
<ul>
<li>feature分支命名：feature/name</li>
<li>release分支命名：release/name</li>
<li>hotfix分支命名：hotfix/name</li>
</ul>
<p>比如有一个「优化分布式Session」的需求，可在develop分支的基础上创建新分支 feature/optimize_distributed_session进行开发，开发完成后合并到develop分支。</p>
<h4 id="分支详细介绍和处理流程"><a href="#分支详细介绍和处理流程" class="headerlink" title="分支详细介绍和处理流程"></a>分支详细介绍和处理流程</h4><h5 id="master分支"><a href="#master分支" class="headerlink" title="master分支"></a>master分支</h5><p>主分支，与线上运行的版本始终保持一致，任何时候都不要直接修改master分支。<br>一个版本的release分支、hotfix分支开发完成后，会合并代码到master分支，也就是说master分支主要来源于release分支和hotfix分支。</p>
<h5 id="develop分支"><a href="#develop分支" class="headerlink" title="develop分支"></a>develop分支</h5><p>开发分支，始终保持最新完成以及bug修复后的代码，新增功能时基于该分支创建feature分支。<br>一个版本的release分支、hotfix分支开发完成后，也会合并到develop分支，另外，一个版本的feature功能开发完成后，也会合并到develop分支。也就是说develop分支来源于feature、release、hotfix分支。</p>
<h5 id="feature分支"><a href="#feature分支" class="headerlink" title="feature分支"></a>feature分支</h5><p>开发新功能或优化现有功能时，会创建feature分支，以develop为基础创建。一般会有多个功能同时开发，但上线时间可能不同，在适当的时候将特定的feature分支合并到develop分支，并创建release分支，进入测试状态。</p>
<h5 id="release分支"><a href="#release分支" class="headerlink" title="release分支"></a>release分支</h5><p>当一组feature开发完成，会首先合并到develop分支，开始进入提测阶段时，会创建release分支。<br>以release分支代码为基准提测，测试过程中若存在bug需要修复，则直接由开发者在release分支修复并提交。<br>测试完成之后，合并release分支到master和develop分支，此时master为最新代码，用作上线。</p>
<h5 id="hotfix分支"><a href="#hotfix分支" class="headerlink" title="hotfix分支"></a>hotfix分支</h5><p>线上出现紧急问题时，需要及时修复，以master分支为基线，创建hotfix分支，修复完成后，需要合并到master分支和develop分支。</p>
<h4 id="特殊情况处理和注意点"><a href="#特殊情况处理和注意点" class="headerlink" title="特殊情况处理和注意点"></a>特殊情况处理和注意点</h4><p>develop分支已存在未上线的feature代码, 此时需要紧急上线一个新功能, 但develop的代码不能上，如何处理 ？</p>
<ul>
<li>以master为基线创建feature， 在完成之后，代码合并到master分支；</li>
<li>为了保证develop是最新代码，需要从master合并到develop分支；</li>
</ul>
<p>以develop为基线，创建了f1和f2两个feature分支之后, f1,f2开发一半的时候，发现两个分支代码需要有依赖怎么办 ？</p>
<ul>
<li>最好在开发开始前确定两个功能是否相关,若相关则只创建一个分支,两个功能在一起开发;</li>
<li>如果已经创建，则需要合并到一个分支；</li>
</ul>
<p>一定要保证commit历史记录的整洁，代码合并时，根据情况选择merge或rebase;<br>使用rebase注意，一旦分支中的提交对象发布到公共仓库，就千万不要对该分支进行衍合操作；<br>提交说明规范：</p>
<ul>
<li>提交说明最好限制在一行以内，50个字符以下，简明扼要地描述更新内容，空开一行后，再展开详细注解；</li>
<li>如果关联jira，写上jira地址；</li>
</ul>
<p><img src="https://cdn.nlark.com/yuque/0/2020/webp/160356/1586310708140-bc14d98f-5ca8-409f-b8ec-d4ffe174de68.webp#align=left&display=inline&height=795&originHeight=795&originWidth=600&size=0&status=done&style=none&width=600"></p>
<h4 id="git-flow工具"><a href="#git-flow工具" class="headerlink" title="git-flow工具"></a>git-flow工具</h4><p>上面的流程在第一次接触时，会觉得有点复杂，通过git-flow工具可以把这些流程自动化。它是一个命令行工具，支持各个平台，比如OSX、Linux、Windows等支持。</p>
<h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h5><p>通过 git flow init 命令进行初始化，以交互式的方式进行，主要是约定分支的命名，建议使用默认值；</p>
<h5 id="开发新功能"><a href="#开发新功能" class="headerlink" title="开发新功能"></a>开发新功能</h5><p>git flow feature start f1 添加新特性，这个操作创建了一个基于develop的特性分支，并切换到这个分支之下。<br>git flow feature finish f1 完成新特性，这个操作会合并f1分支到develop分支，并删除特性分支，切换回develop分支。<br>git flow feature publish f1 发布新分支，发布新特性分支到远程服务器，其它用户也可以使用这分支。</p>
<h5 id="发布版本"><a href="#发布版本" class="headerlink" title="发布版本"></a>发布版本</h5><p>git flow release start r1 [BASE] 创建发布版本，[BASE]是以哪个分支或commit为基础进行发版，一般为develop。<br>git flow release publish r1 发布release分支，其他同事就可以看到这个分支，并修改一些小问题。<br>git flow release finish r1 完成release分支，会合并release分支到master分支，用release分支名打Tag，合并release分支到 develop分支，最后移除release分支。</p>
<h5 id="修复线上问题"><a href="#修复线上问题" class="headerlink" title="修复线上问题"></a>修复线上问题</h5><p>有可能需要修正 master 分支上某个 TAG 标记的生产版本。<br>git flow hotfix start VERSION [BASENAME] 创建hotfix分支，VERSION 参数标记着修正版本，[BASENAME]为finish release时填写的版本号。<br>git flow hotfix finish VERSION，当完成紧急修复分支，代码合并到develop和 master分支。相应地，master分支打上修正版本的 TAG。<br><img src="https://cdn.nlark.com/yuque/0/2020/webp/160356/1586310707983-39ab85ca-7a04-4943-a5ba-9258d127e29a.webp#align=left&display=inline&height=857&originHeight=857&originWidth=1280&size=0&status=done&style=none&width=1280"></p>
<h5 id="关于系统版本号的问题"><a href="#关于系统版本号的问题" class="headerlink" title="关于系统版本号的问题"></a>关于系统版本号的问题</h5><ul>
<li>版本号的格式： X.Y.Z</li>
<li>递增的规则为：<ul>
<li>X 表示主版本号，当 API 的兼容性变化时，X 需递增。</li>
<li>Y 表示次版本号，当增加功能时(不影响 API 的兼容性)，Y 需递增。</li>
<li>Z 表示修订号，当做 Bug 修复时(不影响 API 的兼容性)，Z 需递增。</li>
</ul>
</li>
</ul>

  </article>

  
    
  <div class="nexmoe-post-copyright">
    <strong>Author：</strong>zkygit<br>
    <strong>Link：</strong><a href="https://zkydrx.github.io/2020/10/16/2020-04-24-git-branch-manage-work-flow/" title="https:&#x2F;&#x2F;zkydrx.github.io&#x2F;2020&#x2F;10&#x2F;16&#x2F;2020-04-24-git-branch-manage-work-flow&#x2F;" target="_blank" rel="noopener">https:&#x2F;&#x2F;zkydrx.github.io&#x2F;2020&#x2F;10&#x2F;16&#x2F;2020-04-24-git-branch-manage-work-flow&#x2F;</a><br>
    
      <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
    
  </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/Git/" rel="tag">Git</a>
    
</div>

  <div class="nexmoe-post-footer">
    <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: 'Iv1.1b1b80adf1dee68f',
        clientSecret: 'efbbbc59031beb88c04461b1304e43126ae1bbc5',
        id: window.location.pathname,
        repo: 'zkydrx.github.io',
        owner: 'nexmoe',
        admin: 'nexmoe'
    })
    gitalk.render('gitalk')
</script>
</section>
  </div>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script >hljs.initHighlightingOnLoad();</script>


    <script src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>


<script src="/js/app.js?v=1602822831141"></script>
  
    <!-- Google Analytics -->
<script>
    window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
    ga('create', 'UA-180718303-1', 'auto');
    ga('send', 'pageview');
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>



    <!-- CNZZ Analytics -->
<div hidden>
    <script src="//s95.cnzz.com/z_stat.php?id=1279352932&web_id=1279352932" language="JavaScript"></script>
</div>




</body>

</html>
